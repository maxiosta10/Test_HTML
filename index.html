<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Testing HTML para impresión rápida</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            margin: 20px;
            width: 210mm;
            height: 297mm;
        }
        h1 {
            text-align: center;
        }
        table {
            width: 100%;
            border-collapse: collapse;
            margin-top: 20px;
        }
        th, td {
            border: 1px solid black;
            padding: 8px;
            text-align: left;
        }
        th {
            background-color: lightgray;
            font-weight: bold;
        }
        .nota {
            border: 2px solid red;
            padding: 10px;
            text-align: center;
            margin-top: 20px;
            font-weight: bold;
        }
        .imagen-container {
            text-align: center;
            margin-top: 20px;
        }
    </style>
</head>
<body onload="window.print()">

    <h1>Testing HTML para impresión rápida</h1>

    <table>
        <tr>
            <th>Concepto</th>
            <th>Monto</th>
        </tr>
        <tbody id="tabla-body"></tbody>
    </table>

    <div class="imagen-container" id="svg-container"></div>

    <div class="nota">Esto es todo amigos</div>

    <script>
        function obtenerParametros(url) {
            const params = new URLSearchParams(url);
            return {
                conceptos: params.get('conceptos') ? params.get('conceptos').split(',') : [],
                montos: params.get('montos') ? params.get('montos').split(',') : [],
                imagen: params.get('svg') ? decodeURIComponent(params.get('svg')) : null
            };
        }

        const parametros = obtenerParametros(window.location.search);

        // Llenar la tabla con los datos de AppSheet
        const tablaBody = document.getElementById('tabla-body');
        for (let i = 0; i < parametros.conceptos.length; i++) {
            const fila = document.createElement('tr');
            fila.innerHTML = `<td>${parametros.conceptos[i]}</td><td>${parametros.montos[i]}</td>`;
            tablaBody.appendChild(fila);
        }

        // Mostrar la imagen SVG en la página
        if (parametros.imagen) {
            // Decodificamos y mostramos el SVG
            document.getElementById('svg-container').innerHTML = atob(parametros.imagen);
        }
    </script>

</body>
</html>
